<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect Cleaning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        emailjs.init("O93cZUSMZMZoLwHQe"); /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å—é–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ—à—å Public Key */
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-4 md:p-8">
    <div class="max-w-3xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 p-8 text-white">
                <h1 class="text-3xl font-bold mb-2" id="logoName">Quality Plus SV - –ê–Ω–∫–µ—Ç–∞</h1>
                <p class="text-purple-100" id="blockCounter">–ë–ª–æ–∫ 1 –∏–∑ 10</p>
                <div class="mt-4 bg-white/20 rounded-full h-2 overflow-hidden">
                    <div id="progressBar" class="h-full bg-white transition-all duration-500 ease-out" style="width: 10%"></div>
                </div>
            </div>

            <!-- Content -->
            <div class="p-8">
                <div id="blockContent"></div>

                <!-- Navigation -->
                <div class="flex gap-3 mt-8" id="navigation">
                    <button id="prevBtn" class="flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium rounded-xl transition-all transform hover:scale-105" style="display: none;">
                        –ù–∞–∑–∞–¥
                    </button>
                    <button id="nextBtn" class="flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-medium rounded-xl transition-all transform hover:scale-105 shadow-lg">
                        –î–∞–ª–µ–µ
                    </button>
                </div>

                <!-- Block Navigator -->
                <div class="flex flex-wrap gap-2 mt-6 justify-center" id="blockNavigator"></div>
            </div>
            </div>
            <div class="flex gap-3 p-4 justify-end" style="position: absolute; top: 0; right: 0;">
                <button onclick="setLanguage('ru')" class="px-3 py-1 bg-blue-200 rounded" >RU</button>
                <button onclick="setLanguage('en')" class="px-3 py-1 bg-pink-200 rounded">EN</button>
            </div>

    </div>

    <script src="./i18n.js"></script>
    <script>
        const formData = {
            name: '', address: '', phone: '', telegram: '',
            housingType: [], area: '', bedrooms: '', bathrooms: '',
            features: [], featureOther: '', hasChildren: null, hasPets: null,
            allergies: '', cleaningTypes: [], timePreference: [], specificTime: '',
            priorityZones: [], doNotTouch: '', additionalServices: [],
            wantsGifts: null, comments: '', agreement: false, date: '', signature: ''
        };

        let currentBlock = 1;
        const totalBlocks = 10;
        let currentLang = "ru";

        const blocks = [
            {
                number: 1,
                title: i18n[currentLang]['contactData']['label'],
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['contactData']['label']}</h2>
                    <div class="space-y-6">
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['name']['label']}</label>
                            <input type="text" id="name" value="${formData.name}" placeholder="${i18n[currentLang]['name']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['address']['label']}</label>
                            <input type="text" id="address" value="${formData.address}" placeholder="${i18n[currentLang]['name']['label']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['phone']['label']}</label>
                            <input type="tel" id="phone" value="${formData.phone}" placeholder="${i18n[currentLang]['phone']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['telegram']['label']}</label>
                            <input type="text" id="telegram" value="${formData.telegram}" placeholder="@username" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                    </div>
                `
            },
            {
                number: 2,
                title: `${i18n[currentLang]['aboutObject']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['aboutObject']['label']}</h2>
                    <div class="space-y-6">
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['housingType']['label']}</label>
                            <div class="flex flex-wrap gap-3">
                                ${i18n[currentLang]['housingType']['data'].map(type => `
                                    <button onclick="toggleArrayItem('housingType', '${type}')" class="px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ${formData.housingType.includes(type) ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${type}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['area']['label']}</label>
                            <input type="text" id="area" value="${formData.area}" placeholder="${i18n[currentLang]['area']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['bedrooms']['label']}:</label>
                                <input type="number" id="bedrooms" value="${formData.bedrooms}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['bathrooms']['label']}:</label>
                                <input type="number" id="bathrooms" value="${formData.bathrooms}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                            </div>
                        </div>
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['houseFeatures']['label']}:</label>
                            <div class="space-y-2">
                                ${i18n[currentLang]['houseFeatures']['data'].map(feature => `
                                    <label class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all">
                                        <input type="checkbox" ${formData.features.includes(feature) ? 'checked' : ''} onchange="toggleArrayItem('features', '${feature}')" class="w-5 h-5 text-purple-500 rounded focus:ring-2 focus:ring-purple-400">
                                        <span class="text-gray-700">${feature}</span>
                                    </label>
                                `).join('')}
                                <input type="text" id="featureOther" value="${formData.featureOther}" placeholder="${i18n[currentLang]['other']['label']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all mt-2">
                            </div>
                        </div>
                    </div>
                `
            },
            {
                number: 3,
                title: `${i18n[currentLang]['sensitivities']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üë•${i18n[currentLang]['sensitivities']['label']}</h2>
                    <div class="space-y-6">
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['children']['label']}</label>
                            <div class="flex gap-3">
                                ${i18n[currentLang]['yesNo']['data'].map(option => `
                                    <button onclick="setFormValue('hasChildren', '${option}')" class="flex-1 px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ${formData.hasChildren === option ? 'bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['pets']['label']}</label>
                            <div class="flex gap-3">
                                ${i18n[currentLang]['yesNo']['data'].map(option => `
                                    <button onclick="setFormValue('hasPets', '${option}')" class="flex-1 px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ${formData.hasPets === option ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['allergies']['label']}</label>
                            <textarea id="allergies" rows="3" placeholder="${i18n[currentLang]['allergies']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all resize-none">${formData.allergies}</textarea>
                        </div>
                    </div>
                `
            },
            {
                number: 4,
                title: 'üïê –¢–∏–ø —É–±–æ—Ä–∫–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['cleaningType']['label']}</h2>
                    <div class="space-y-6">
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['requirements']['label']}</label>
                            <div class="grid grid-cols-2 gap-3">
                                ${i18n[currentLang]['requirements']['data'].map(type => `
                                    <button onclick="toggleArrayItem('cleaningTypes', '${type}')" class="px-4 py-3 rounded-xl font-medium text-sm transition-all transform hover:scale-105 ${formData.cleaningTypes.includes(type) ? 'bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${type}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['prefTime']['label']}</label>
                            <div class="flex gap-3">
                                ${i18n[currentLang]['prefTime']['data'].map(time => `
                                    <button onclick="toggleArrayItem('timePreference', '${time}')" class="flex-1 px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ${formData.timePreference.includes(time) ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${time}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['prefHour']['label']}:</label>
                            <input type="text" id="specificTime" value="${formData.specificTime}" placeholder="${i18n[currentLang]['prefHour']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                        </div>
                    </div>
                `
            },
            {
                number: 5,
                title: `${i18n[currentLang]['priorAreas']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['priorAreas']['label']}</h2>
                    <p class="text-sm text-gray-600 mb-4">${i18n[currentLang]['priorAreas']['tip']}</p>
                    <div class="grid grid-cols-2 gap-3">
                        ${i18n[currentLang]['priorAreas']['data'].map(zone => `
                            <button onclick="toggleArrayItem('priorityZones', '${zone}')" class="px-4 py-3 rounded-xl font-medium text-sm transition-all transform hover:scale-105 ${formData.priorityZones.includes(zone) ? 'bg-gradient-to-r from-yellow-400 to-orange-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                ${zone}
                            </button>
                        `).join('')}
                    </div>
                `
            },
            {
                number: 6,
                title: `${i18n[currentLang]['doNotTouch']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['doNotTouch']['label']}</h2>
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['doNotTouch']['tip']}</label>
                        <textarea id="doNotTouch" rows="4" placeholder="${i18n[currentLang]['doNotTouch']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all resize-none">${formData.doNotTouch}</textarea>
                    </div>
                `
            },
            {
                number: 7,
                title: `${i18n[currentLang]['addService']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['addService']['label']}</h2>
                    <div class="space-y-2 max-h-96 overflow-y-auto pr-2">
                        ${i18n[currentLang]['addService']['data'].map(service => `
                            <label class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all">
                                <input type="checkbox" ${formData.additionalServices.includes(service) ? 'checked' : ''} onchange="toggleArrayItem('additionalServices', '${service}')" class="w-5 h-5 text-purple-500 rounded focus:ring-2 focus:ring-purple-400">
                                <span class="text-gray-700">${service}</span>
                            </label>
                        `).join('')}
                    </div>
                `
            },
            {
                number: 8,
                title: `${i18n[currentLang]['gift']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['gift']['label']}</h2>
                    <div class="space-y-4">
                        <p class="text-sm text-gray-600">${i18n[currentLang]['giftNote']['tip']}</p>
                        <div class="space-y-3">
                            <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['giftNote']['label']}</label>
                            <div class="flex gap-3">
                                ${i18n[currentLang]['yesNo']['data'].map(option => `
                                    <button onclick="setFormValue('wantsGifts', '${option}')" class="flex-1 px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ${formData.wantsGifts === option ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}">
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
<!--                        <div class="bg-gradient-to-r from-pink-50 to-purple-50 p-4 rounded-xl">-->
<!--                            <p class="text-sm text-gray-600">–ù–∞–ø—Ä–∏–º–µ—Ä:</p>-->
<!--                            <p class="text-sm text-gray-600">‚Äî –ø—Ä–∏—è—Ç–Ω—ã–µ –º–µ–ª–æ—á–∏ –¥–ª—è –¥–æ–º–∞</p>-->
<!--                            <p class="text-sm text-gray-600">‚Äî –ø–æ–¥–∞—Ä–∫–∏ –¥–µ—Ç—è–º</p>-->
<!--                        </div>-->
                    </div>
                `
            },
            {
                number: 9,
                title: `${i18n[currentLang]['comments']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['comments']['label']}</h2>
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['commentNotes']['label']}</label>
                        <textarea id="comments" rows="5" placeholder="${i18n[currentLang]['commentNotes']['placeholder']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all resize-none">${formData.comments}</textarea>
                    </div>
                `
            },
            {
                number: 10,
                title: `${i18n[currentLang]['agreement']['label']}`,
                render: () => `
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">${i18n[currentLang]['agreement']['label']}</h2>
                    <div class="space-y-6">
                        <label class="flex items-start gap-3 p-4 rounded-lg hover:bg-gray-50 cursor-pointer transition-all">
                            <input type="checkbox" id="agreement" ${formData.agreement ? 'checked' : ''} onchange="setFormValue('agreement', this.checked)" class="w-5 h-5 text-purple-500 rounded focus:ring-2 focus:ring-purple-400 mt-1">
                            <span class="text-gray-700">${i18n[currentLang]['agreement']['tip']}</span>
                        </label>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-gray-700">${i18n[currentLang]['date']['label']}:</label>
                                <input type="date" id="date" value="${formData.date}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-gray-700">–ü–æ–¥–ø–∏—Å—å:</label>
                                <input type="text" id="signature" value="${formData.signature}" placeholder="${i18n[currentLang]['signature']['label']}" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-400 focus:outline-none transition-all">
                            </div>
                        </div>
                        ${formData.agreement ? `
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl text-center">
                                <svg class="w-12 h-12 text-green-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p class="text-green-700 font-medium">${i18n[currentLang]['thanks']['label']}</p>
                            </div>
                        ` : ''}
                    </div>
                `
            }
        ];

        function renderBlock() {
            saveCurrentBlockData();
            const block = blocks[currentBlock - 1];
            document.getElementById('blockContent').innerHTML = block.render();
            document.getElementById('blockCounter').textContent = `${i18n[currentLang]['block']} ${currentBlock} ${i18n[currentLang]['of']} ${totalBlocks}`;
            document.getElementById('progressBar').style.width = `${(currentBlock / totalBlocks) * 100}%`;
            document.getElementById('logoName').textContent = `Quality Plus SV - ${i18n[currentLang]['logo']}`;


            document.getElementById('prevBtn').style.display = currentBlock > 1 ? 'block' : 'none';
            document.getElementById('nextBtn').textContent = currentBlock < totalBlocks ? i18n[currentLang]['next'] : i18n[currentLang]['complete'];
            
            renderBlockNavigator();
        }

        function renderBlockNavigator() {
            const navigator = document.getElementById('blockNavigator');
            navigator.innerHTML = blocks.map(block => `
                <button onclick="goToBlock(${block.number})" class="w-10 h-10 rounded-lg font-medium transition-all transform hover:scale-110 ${currentBlock === block.number ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg' : 'bg-gray-200 text-gray-600 hover:bg-gray-300'}">
                    ${block.number}
                </button>
            `).join('');
        }

        function saveCurrentBlockData() {
            const fields = ['name', 'address', 'phone', 'telegram', 'area', 'bedrooms', 'bathrooms', 
                          'featureOther', 'allergies', 'specificTime', 'doNotTouch', 'comments', 'date', 'signature'];
            fields.forEach(field => {
                const el = document.getElementById(field);
                if (el) formData[field] = el.value;
            });
            
            const agreement = document.getElementById('agreement');
            if (agreement) formData.agreement = agreement.checked;
        }

        function toggleArrayItem(field, value) {
            const index = formData[field].indexOf(value);
            if (index > -1) {
                formData[field].splice(index, 1);
            } else {
                formData[field].push(value);
            }
            renderBlock();
        }

        function setFormValue(field, value) {
            formData[field] = value;
            renderBlock();
        }

        function goToBlock(blockNumber) {
            currentBlock = blockNumber;
            renderBlock();
        }

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentBlock > 1) {
                currentBlock--;
                renderBlock();
            }
        });

        async function sendFormViaEmailJS() {
            // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
            saveCurrentBlockData();

            const templateParams = {
                /* –ö–æ–Ω—Ç–∞–∫—Ç—ã */
                name: formData.name,
                address: formData.address,
                phone: formData.phone,
                telegram: formData.telegram,

                /* –û–± –æ–±—ä–µ–∫—Ç–µ */
                housingType: formData.housingType.join(', '),
                area: formData.area,
                bedrooms: formData.bedrooms,
                bathrooms: formData.bathrooms,
                features: formData.features.join(', '),
                featureOther: formData.featureOther,

                /* –ñ–∏–ª—å—Ü—ã */
                hasChildren: formData.hasChildren,
                hasPets: formData.hasPets,
                allergies: formData.allergies,

                /* –£–±–æ—Ä–∫–∞ */
                cleaningTypes: formData.cleaningTypes.join(', '),
                timePreference: formData.timePreference.join(', '),
                specificTime: formData.specificTime,

                /* –ó–æ–Ω—ã */
                priorityZones: formData.priorityZones.join(', '),
                doNotTouch: formData.doNotTouch,
                additionalServices: formData.additionalServices.join(', '),

                /* –ü—Ä–æ—á–µ–µ */
                wantsGifts: formData.wantsGifts,
                comments: formData.comments,
                agreement: formData.agreement ? '–î–∞' : '–ù–µ—Ç',
                date: formData.date,
                signature: formData.signature
            };

            try {
                /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ EmailJS */
                const result = await emailjs.send(
                    "service_if649gz",     // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: Service ID
                    "template_e3p7hml",    // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: Template ID
                    templateParams
                );

                alert("–ê–Ω–∫–µ—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
            } catch (error) {
                alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
                console.error(error);
            }
        }

        function t(key) {
            return i18n[currentLang][key];
        }

        function updateHeader() {
            const counter = document.getElementById("blockCounter");

            counter.innerText = `${t("block")} ${currentBlock} ${t("of")} ${totalBlocks}`;
        }

        function updateButtons() {
            document.getElementById("nextBtn").innerText = t("next");
            document.getElementById("prevBtn").innerText = t("back");
        }

        function setLanguage(lang) {
            currentLang = lang;
            renderBlock();      // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–ª–æ–∫
            updateHeader();     // –æ–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            updateButtons();    // –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏
        }

        document.getElementById('nextBtn').addEventListener('click', () => {
            if (currentBlock < totalBlocks) {
                currentBlock++;
                renderBlock();
            } else {
                // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞
                sendFormViaEmailJS();
            }
            // if (currentBlock < totalBlocks) {
            //     currentBlock++;
            //     renderBlock();
            // } else {
            //     saveCurrentBlockData();
            //     alert('–ê–Ω–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –°–ø–∞—Å–∏–±–æ!\n\n' + JSON.stringify(formData, null, 2));
            // }
        });

        renderBlock();
    </script>
</body>
</html>
